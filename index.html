<!DOCTYPE html>
<html>
   <head>
        <title>Send Request</title>
      
        <meta http-equiv = "refresh" content = "100; url = https://github.com/Shayneintsu/DrawMeSomething.github.io/blob/main/README.md" />
    
    </head>
   <body>
        <a href="https://github.com/login/oauth/authorize?client_id=Ov23li1GYOtffaLfda4h&redirect_uri=https://shayneintsu.github.io/DrawMeSomething.github.io/">
            <img src="https://github.githubassets.com/images/icons/emoji/octocat.png" alt="GitHub Logo">
            <span>Sign in with GitHub</span>
        </a>
        <script type="text/javascript">

            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
        
            if (code) {
              // Afficher le code dans la console (Ã  remplacer par un envoi au serveur)
              console.log('Code d\'autorisation :', code);
            }





            const url = 'https://api.github.com/repos/Shayneintsu/DrawMeSomething.github.io/actions/workflows/main.yml/dispatches';
            const datas = {
                    ref: 'main',
                    inputs: {
                        vartest: 'tessssst'
                    }
                };
                
            const token = code;
            
            const options = {
                method: 'POST',
                headers: {
                    'Accept': 'application/vnd.github+json',
                    'Authorization': `Bearer ${token}`,
                    'X-GitHub-Api-Version': '2022-11-28',
                },
                body: JSON.stringify(datas)
            };
            
            fetch(url, options)
                .then(response => response.json())
                .then(data => {
                    console.log('statusCode:', response.status);
                    console.log('data:', data);
                })
                .catch(error => console.error(error));
        
        </script>
    

        <p>Redirecting to another URL</p>
   </body>
</html>
